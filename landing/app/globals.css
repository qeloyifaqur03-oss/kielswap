@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-background text-white antialiased;
    overflow-x: hidden;
  }
}

@layer utilities {
  .glass {
    @apply backdrop-blur-xl shadow-2xl;
    background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    position: relative;
  }
  
  .glass::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(to bottom right, rgba(236, 72, 153, 0.05), transparent, rgba(168, 85, 247, 0.05));
    pointer-events: none;
    z-index: 0;
  }
  
  .glass > * {
    position: relative;
    z-index: 1;
  }
  
  .glass-strong {
    @apply backdrop-blur-xl shadow-2xl;
    background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.03));
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    position: relative;
  }
  
  .glass-strong::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(to bottom right, rgba(236, 72, 153, 0.05), transparent, rgba(168, 85, 247, 0.05));
    pointer-events: none;
    z-index: 0;
  }
  
  .glass-strong > * {
    position: relative;
    z-index: 1;
  }
  
  .text-gradient {
    @apply bg-gradient-to-r from-pink-400 via-accent to-purple-400 bg-clip-text text-transparent;
  }
  
  /* Reusable noise layer */
  .noiseLayer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0.06;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    z-index: 1;
  }
  
  /* Fake blur overlay for hamburger menu background */
  .menuOverlayFakeBlur {
    background: rgba(0, 0, 0, 0.55);
    background-image: 
      radial-gradient(circle at center, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.7) 100%);
    position: relative;
    transition-property: opacity;
    transition-duration: 0.05s;
    transition-timing-function: ease-out;
  }
  
  /* Fake glass effect for menu panel */
  .menuPanelFakeGlass {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.08) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      rgba(255, 255, 255, 0.03) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
  }
  
  /* Inner highlight for menu panel */
  .menuPanelFakeGlass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.05) 0%,
      transparent 50%
    );
    pointer-events: none;
    z-index: 0;
  }
  
  /* Hamburger menu item hover state */
  .menu-item-hover {
    padding: 10px 14px;
    color: #ffffff;
    border: 1px solid transparent;
    border-radius: 10px;
    transition: background 120ms ease, border-color 120ms ease;
  }
  
  .menu-item-hover:hover {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.08);
  }

  /* Feedback badge hover glow effect */
  .feedback-badge {
    transition: filter 0.25s ease-out;
  }
  
  .feedback-badge:hover {
    filter: drop-shadow(0 0 8px rgba(236, 72, 153, 0.4));
  }

  /* Chrome autofill fix for input and textarea */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill,
  textarea:-webkit-autofill:hover,
  textarea:-webkit-autofill:focus {
    -webkit-box-shadow: 0 0 0px 1000px rgba(255, 255, 255, 0.05) inset !important;
    -webkit-text-fill-color: #ffffff !important;
    transition: background-color 9999s ease-in-out 0s !important;
    background-color: rgba(255, 255, 255, 0.05) !important;
  }

  /* Smooth reveal/collapse animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeOutUp {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(8px);
    }
  }

  .animate-reveal {
    animation: fadeInUp 250ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }

  .animate-collapse {
    animation: fadeOutUp 250ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }

  @keyframes pulse-subtle {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 0.9; }
  }

  .animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Remove number input spinners */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
input[type="number"] {
  -moz-appearance: textfield;
}

/* Noise texture overlay */
.noise-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  z-index: 1;
}

/* Hide Next.js error overlay for extension-related errors */
[data-nextjs-toast],
[data-nextjs-dialog],
.nextjs-toast-container,
#__next-build-watcher {
  /* Check if error text contains extension-related keywords */
}

/* More aggressive: hide any overlay that might be showing extension errors */
body > div[style*="position: fixed"]:has([data-nextjs-toast]),
body > div[style*="position: fixed"]:has([data-nextjs-dialog]) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}
