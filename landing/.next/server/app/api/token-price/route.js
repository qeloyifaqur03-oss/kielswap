"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/token-price/route";
exports.ids = ["app/api/token-price/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftoken-price%2Froute&page=%2Fapi%2Ftoken-price%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftoken-price%2Froute.ts&appDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftoken-price%2Froute&page=%2Fapi%2Ftoken-price%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftoken-price%2Froute.ts&appDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_meltl_OneDrive_Desktop_kielswap_landing_app_api_token_price_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/token-price/route.ts */ \"(rsc)/./app/api/token-price/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/token-price/route\",\n        pathname: \"/api/token-price\",\n        filename: \"route\",\n        bundlePath: \"app/api/token-price/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\meltl\\\\OneDrive\\\\Desktop\\\\kielswap\\\\landing\\\\app\\\\api\\\\token-price\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_meltl_OneDrive_Desktop_kielswap_landing_app_api_token_price_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/token-price/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi41X3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGdG9rZW4tcHJpY2UlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRva2VuLXByaWNlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdG9rZW4tcHJpY2UlMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDbWVsdGwlNUNPbmVEcml2ZSU1Q0Rlc2t0b3AlNUNraWVsc3dhcCU1Q2xhbmRpbmclNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q21lbHRsJTVDT25lRHJpdmUlNUNEZXNrdG9wJTVDa2llbHN3YXAlNUNsYW5kaW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QztBQUNwSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2tpZWxzd2FwLWxhbmRpbmcvP2IwYjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcbWVsdGxcXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxraWVsc3dhcFxcXFxsYW5kaW5nXFxcXGFwcFxcXFxhcGlcXFxcdG9rZW4tcHJpY2VcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Rva2VuLXByaWNlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdG9rZW4tcHJpY2VcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Rva2VuLXByaWNlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcbWVsdGxcXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxraWVsc3dhcFxcXFxsYW5kaW5nXFxcXGFwcFxcXFxhcGlcXFxcdG9rZW4tcHJpY2VcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Rva2VuLXByaWNlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftoken-price%2Froute&page=%2Fapi%2Ftoken-price%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftoken-price%2Froute.ts&appDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/token-price/route.ts":
/*!**************************************!*\
  !*** ./app/api/token-price/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_redis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/redis */ \"(rsc)/./lib/redis.ts\");\n/**\r\n * Token price API endpoint\r\n * Fetches token prices from multiple sources:\r\n * 1. CoinGecko API (primary, free, no API key required)\r\n * 2. CoinMarketCap API (fallback, requires API key)\r\n * 3. CryptoCompare API (additional source)\r\n * Used as fallback for calculating exchange rates when providers don't work\r\n */ \n\n// Token ID to CoinGecko ID mapping\nconst TOKEN_TO_COINGECKO_ID = {\n    // Native tokens\n    eth: \"ethereum\",\n    bnb: \"binancecoin\",\n    matic: \"matic-network\",\n    pol: \"matic-network\",\n    avax: \"avalanche-2\",\n    op: \"optimism\",\n    arb: \"arbitrum\",\n    base: \"base\",\n    zksync: \"zksync\",\n    linea: \"linea\",\n    scroll: \"scroll\",\n    blast: \"blast\",\n    gnosis: \"gnosis\",\n    opbnb: \"opbnb\",\n    mantle: \"mantle\",\n    cronos: \"cronos\",\n    cro: \"crypto-com-chain\",\n    rootstock: \"rootstock\",\n    rbtc: \"rootstock\",\n    sonic: \"sonic\",\n    s: \"sonic\",\n    core: \"coredaoorg\",\n    ronin: \"ronin\",\n    ron: \"ronin\",\n    xdai: \"gnosis\",\n    kava: \"kava\",\n    plasma: \"plasma\",\n    xpl: \"plasma\",\n    plume: \"plume\",\n    pulsechain: \"pulsechain\",\n    pls: \"pulsechain\",\n    berachain: \"berachain\",\n    bera: \"berachain\",\n    mnt: \"mantle\",\n    celo: \"celo\",\n    \"immutable x\": \"immutable-x\",\n    \"immutable-zkevm\": \"immutable-x\",\n    \"world (chain)\": \"worldcoin-wld\",\n    \"world-chain\": \"worldcoin-wld\",\n    goat: \"goat\",\n    btc: \"bitcoin\",\n    merlin: \"merlin\",\n    katana: \"katana\",\n    ink: \"ink\",\n    bob: \"bob\",\n    abstract: \"abstract\",\n    mon: \"monad\",\n    usdc: \"usd-coin\",\n    usdt: \"tether\",\n    dai: \"dai\",\n    weth: \"weth\",\n    wbtc: \"wrapped-bitcoin\",\n    link: \"chainlink\",\n    uni: \"uniswap\",\n    aave: \"aave\",\n    crv: \"curve-dao-token\",\n    mkr: \"maker\",\n    snx: \"havven\",\n    comp: \"compound-governance-token\",\n    sushi: \"sushi\",\n    susd: \"nusd\",\n    \"1inch\": \"1inch\",\n    frax: \"frax\",\n    fxs: \"frax-share\",\n    ldo: \"lido-dao\",\n    grt: \"the-graph\",\n    \"matic-erc20\": \"matic-network\",\n    // Ecosystem tokens\n    arb: \"arbitrum\",\n    gmx: \"gmx\",\n    op: \"optimism\",\n    velo: \"velodrome-finance\",\n    aero: \"aerodrome-finance\",\n    cake: \"pancakeswap-token\",\n    xvs: \"venus\",\n    joe: \"trader-joe\",\n    qi: \"qi-dao\",\n    quick: \"quickswap\",\n    \"mnt-token\": \"mantle\"\n};\n// Token ID to CoinMarketCap symbol mapping\nconst TOKEN_TO_CMC_SYMBOL = {\n    eth: \"ETH\",\n    bnb: \"BNB\",\n    matic: \"MATIC\",\n    pol: \"POL\",\n    avax: \"AVAX\",\n    cro: \"CRO\",\n    celo: \"CELO\",\n    s: \"S\",\n    pls: \"PLS\",\n    ron: \"RON\",\n    mnt: \"MNT\",\n    bera: \"BERA\",\n    core: \"CORE\",\n    xdai: \"XDAI\",\n    rbtc: \"RBTC\",\n    xpl: \"XPL\",\n    plume: \"PLUME\",\n    kava: \"KAVA\",\n    btc: \"BTC\",\n    op: \"OP\",\n    arb: \"ARB\",\n    usdc: \"USDC\",\n    usdt: \"USDT\",\n    dai: \"DAI\",\n    weth: \"WETH\",\n    wbtc: \"WBTC\",\n    link: \"LINK\",\n    uni: \"UNI\",\n    aave: \"AAVE\",\n    crv: \"CRV\",\n    mkr: \"MKR\",\n    snx: \"SNX\",\n    comp: \"COMP\",\n    sushi: \"SUSHI\",\n    \"1inch\": \"1INCH\",\n    frax: \"FRAX\",\n    fxs: \"FXS\",\n    ldo: \"LDO\",\n    grt: \"GRT\",\n    gmx: \"GMX\",\n    velo: \"VELO\",\n    aero: \"AERO\",\n    cake: \"CAKE\",\n    xvs: \"XVS\",\n    joe: \"JOE\",\n    qi: \"QI\",\n    quick: \"QUICK\",\n    \"mnt-token\": \"MNT\",\n    \"matic-erc20\": \"MATIC\"\n};\n// Token ID to CryptoCompare symbol mapping (for CryptoCompare API)\nconst TOKEN_TO_CRYPTOCOMPARE_SYMBOL = {\n    eth: \"ETH\",\n    bnb: \"BNB\",\n    matic: \"MATIC\",\n    avax: \"AVAX\",\n    op: \"OP\",\n    arb: \"ARB\",\n    base: \"BASE\",\n    celo: \"CELO\",\n    cro: \"CRO\",\n    kava: \"KAVA\",\n    btc: \"BTC\",\n    s: \"S\",\n    pls: \"PLS\",\n    ron: \"RON\",\n    mnt: \"MNT\",\n    bera: \"BERA\",\n    core: \"CORE\",\n    xdai: \"XDAI\",\n    rbtc: \"RBTC\",\n    xpl: \"XPL\",\n    plume: \"PLUME\",\n    usdc: \"USDC\",\n    usdt: \"USDT\",\n    dai: \"DAI\",\n    weth: \"WETH\",\n    wbtc: \"WBTC\",\n    link: \"LINK\",\n    uni: \"UNI\",\n    aave: \"AAVE\",\n    crv: \"CRV\",\n    mkr: \"MKR\",\n    snx: \"SNX\",\n    comp: \"COMP\",\n    sushi: \"SUSHI\",\n    \"1inch\": \"1INCH\",\n    frax: \"FRAX\",\n    fxs: \"FXS\",\n    ldo: \"LDO\",\n    grt: \"GRT\",\n    gmx: \"GMX\",\n    velo: \"VELO\",\n    aero: \"AERO\",\n    cake: \"CAKE\",\n    xvs: \"XVS\",\n    joe: \"JOE\",\n    qi: \"QI\",\n    quick: \"QUICK\",\n    \"mnt-token\": \"MNT\",\n    \"matic-erc20\": \"MATIC\"\n};\nconst runtime = \"nodejs\";\n// In-memory cache as fallback (faster for frequent requests)\nconst memoryCache = new Map();\nconst CACHE_TTL_MS = 60000 // 60 seconds\n;\nconst REDIS_CACHE_TTL_SEC = 60 // Redis TTL in seconds\n;\nasync function GET(request) {\n    try {\n        const searchParams = request.nextUrl.searchParams;\n        const tokenIds = searchParams.get(\"ids\")?.split(\",\").filter(Boolean) || [];\n        if (tokenIds.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing ids parameter\"\n            }, {\n                status: 400\n            });\n        }\n        const now = Date.now();\n        const cachedPrices = {};\n        const uncachedIds = [];\n        // Check in-memory cache first (fastest)\n        for (const id of tokenIds){\n            const cacheKey = id.toLowerCase();\n            const cached = memoryCache.get(cacheKey);\n            if (cached && cached.expiresAt > now) {\n                cachedPrices[cacheKey] = cached.price;\n            } else {\n                uncachedIds.push(cacheKey);\n            }\n        }\n        // Check Redis cache for uncached items (if Redis is available)\n        if (uncachedIds.length > 0 && process.env.UPSTASH_REDIS_REST_URL) {\n            try {\n                const redisKeys = uncachedIds.map((id)=>`price:${id}`);\n                const redisValues = await Promise.allSettled(redisKeys.map((key)=>_lib_redis__WEBPACK_IMPORTED_MODULE_1__.redis.get(key)));\n                for(let i = 0; i < uncachedIds.length; i++){\n                    const result = redisValues[i];\n                    if (result.status === \"fulfilled\" && result.value) {\n                        try {\n                            const value = typeof result.value === \"string\" ? result.value : String(result.value);\n                            const parsed = JSON.parse(value);\n                            // Use if cached within last 60 seconds\n                            if (parsed.price > 0 && now - parsed.timestamp < CACHE_TTL_MS) {\n                                const id = uncachedIds[i];\n                                cachedPrices[id] = parsed.price;\n                                // Update in-memory cache\n                                memoryCache.set(id, {\n                                    price: parsed.price,\n                                    expiresAt: now + CACHE_TTL_MS\n                                });\n                            }\n                        } catch  {\n                        // Invalid cache entry, ignore\n                        }\n                    }\n                }\n            } catch (error) {\n                // Redis unavailable, continue with API fetch\n                if (true) {\n                    console.warn(\"[token-price] Redis unavailable, using in-memory cache only\");\n                }\n            }\n            // Filter out cached items\n            const remainingUncached = uncachedIds.filter((id)=>!cachedPrices[id]);\n            uncachedIds.length = 0;\n            uncachedIds.push(...remainingUncached);\n        }\n        let fetchedPrices = {};\n        if (uncachedIds.length > 0) {\n            // Prepare mappings for all providers\n            const uncachedCoingeckoIdsSet = new Set();\n            const tokenIdToCoingeckoMap = {};\n            for (const id of uncachedIds){\n                const coingeckoId = TOKEN_TO_COINGECKO_ID[id] || TOKEN_TO_COINGECKO_ID[id.toLowerCase()];\n                if (coingeckoId) {\n                    uncachedCoingeckoIdsSet.add(coingeckoId);\n                    tokenIdToCoingeckoMap[id] = coingeckoId;\n                }\n            }\n            const uncachedCoingeckoIds = Array.from(uncachedCoingeckoIdsSet);\n            // Parallel fetching from all sources for maximum speed\n            const pricePromises = [];\n            // 1. CoinGecko (fastest, free)\n            if (uncachedCoingeckoIds.length > 0) {\n                const idsParam = uncachedCoingeckoIds.join(\",\");\n                const url = `https://api.coingecko.com/api/v3/simple/price?ids=${idsParam}&vs_currencies=usd`;\n                pricePromises.push(fetch(url, {\n                    signal: AbortSignal.timeout(1000)\n                }).then(async (response)=>{\n                    if (response.ok) {\n                        const data = await response.json();\n                        // Map CoinGecko IDs back to original token IDs\n                        for (const [originalId, coingeckoId] of Object.entries(tokenIdToCoingeckoMap)){\n                            if (data[coingeckoId] && typeof data[coingeckoId] === \"object\" && \"usd\" in data[coingeckoId]) {\n                                const price = data[coingeckoId].usd;\n                                if (typeof price === \"number\" && price > 0) {\n                                    const originalIdLower = originalId.toLowerCase();\n                                    if (!fetchedPrices[originalIdLower]) {\n                                        fetchedPrices[originalIdLower] = price;\n                                        const cacheKey = originalId.toLowerCase();\n                                        // Update in-memory cache\n                                        memoryCache.set(cacheKey, {\n                                            price,\n                                            expiresAt: now + CACHE_TTL_MS\n                                        });\n                                        // Update Redis cache (async, don't wait) - only if Redis is configured\n                                        if (process.env.UPSTASH_REDIS_REST_URL) {\n                                            _lib_redis__WEBPACK_IMPORTED_MODULE_1__.redis.setex(`price:${cacheKey}`, REDIS_CACHE_TTL_SEC, JSON.stringify({\n                                                price,\n                                                timestamp: now\n                                            })).catch(()=>{});\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        // Map all variations for backward compatibility\n                        for (const [tokenId, coingeckoId] of Object.entries(TOKEN_TO_COINGECKO_ID)){\n                            if (uncachedCoingeckoIdsSet.has(coingeckoId) && data[coingeckoId] && typeof data[coingeckoId] === \"object\" && \"usd\" in data[coingeckoId]) {\n                                const price = data[coingeckoId].usd;\n                                if (typeof price === \"number\" && price > 0) {\n                                    const tokenIdLower = tokenId.toLowerCase();\n                                    if (!fetchedPrices[tokenIdLower]) {\n                                        fetchedPrices[tokenIdLower] = price;\n                                        // Update in-memory cache\n                                        memoryCache.set(tokenIdLower, {\n                                            price,\n                                            expiresAt: now + CACHE_TTL_MS\n                                        });\n                                        // Update Redis cache (async, don't wait) - only if Redis is configured\n                                        if (process.env.UPSTASH_REDIS_REST_URL) {\n                                            _lib_redis__WEBPACK_IMPORTED_MODULE_1__.redis.setex(`price:${tokenIdLower}`, REDIS_CACHE_TTL_SEC, JSON.stringify({\n                                                price,\n                                                timestamp: now\n                                            })).catch(()=>{});\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }).catch(()=>{\n                // Silently fail - will use other sources\n                }));\n            }\n            // 2. CoinMarketCap (parallel, if API key available)\n            const cmcApiKey = process.env.COINMARKETCAP_API_KEY;\n            if (cmcApiKey && uncachedIds.length > 0) {\n                const cmcSymbols = uncachedIds.map((id)=>TOKEN_TO_CMC_SYMBOL[id] || id.toUpperCase()).filter(Boolean).join(\",\");\n                if (cmcSymbols) {\n                    pricePromises.push(fetch(`https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=${cmcSymbols}&convert=USD`, {\n                        headers: {\n                            \"X-CMC_PRO_API_KEY\": cmcApiKey\n                        },\n                        signal: AbortSignal.timeout(1000)\n                    }).then(async (response)=>{\n                        if (response.ok) {\n                            const cmcData = await response.json();\n                            if (cmcData.data) {\n                                for (const [symbol, coins] of Object.entries(cmcData.data)){\n                                    if (coins && Array.isArray(coins) && coins.length > 0 && coins[0].quote?.USD?.price) {\n                                        const price = coins[0].quote.USD.price;\n                                        const symbolLower = symbol.toLowerCase();\n                                        for (const tokenId of uncachedIds){\n                                            const cmcSymbol = TOKEN_TO_CMC_SYMBOL[tokenId] || tokenId.toUpperCase();\n                                            if ((cmcSymbol === symbol || symbolLower === tokenId) && !fetchedPrices[tokenId]) {\n                                                fetchedPrices[tokenId] = price;\n                                                // Update in-memory cache\n                                                memoryCache.set(tokenId, {\n                                                    price,\n                                                    expiresAt: now + CACHE_TTL_MS\n                                                });\n                                                // Update Redis cache (async, don't wait) - only if Redis is configured\n                                                if (process.env.UPSTASH_REDIS_REST_URL) {\n                                                    _lib_redis__WEBPACK_IMPORTED_MODULE_1__.redis.setex(`price:${tokenId}`, REDIS_CACHE_TTL_SEC, JSON.stringify({\n                                                        price,\n                                                        timestamp: now\n                                                    })).catch(()=>{});\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }).catch(()=>{\n                    // Silently fail\n                    }));\n                }\n            }\n            // 3. CryptoCompare (parallel, free)\n            if (uncachedIds.length > 0) {\n                const ccSymbols = uncachedIds.map((id)=>TOKEN_TO_CRYPTOCOMPARE_SYMBOL[id] || id.toUpperCase()).filter(Boolean).join(\",\");\n                if (ccSymbols) {\n                    pricePromises.push(fetch(`https://min-api.cryptocompare.com/data/pricemulti?fsyms=${ccSymbols}&tsyms=USD`, {\n                        signal: AbortSignal.timeout(1000)\n                    }).then(async (response)=>{\n                        if (response.ok) {\n                            const ccData = await response.json();\n                            for (const [symbol, priceData] of Object.entries(ccData)){\n                                if (priceData?.USD && typeof priceData.USD === \"number\" && priceData.USD > 0) {\n                                    const symbolLower = symbol.toLowerCase();\n                                    for (const tokenId of uncachedIds){\n                                        const ccSymbol = TOKEN_TO_CRYPTOCOMPARE_SYMBOL[tokenId] || tokenId.toUpperCase();\n                                        if ((ccSymbol === symbol || symbolLower === tokenId) && !fetchedPrices[tokenId]) {\n                                            fetchedPrices[tokenId] = priceData.USD;\n                                            // Update in-memory cache\n                                            memoryCache.set(tokenId, {\n                                                price: priceData.USD,\n                                                expiresAt: now + CACHE_TTL_MS\n                                            });\n                                            // Update Redis cache (async, don't wait) - only if Redis is configured\n                                            if (process.env.UPSTASH_REDIS_REST_URL) {\n                                                _lib_redis__WEBPACK_IMPORTED_MODULE_1__.redis.setex(`price:${tokenId}`, REDIS_CACHE_TTL_SEC, JSON.stringify({\n                                                    price: priceData.USD,\n                                                    timestamp: now\n                                                })).catch(()=>{});\n                                            }\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }).catch(()=>{\n                    // Silently fail\n                    }));\n                }\n            }\n            // Wait for all requests with a race condition - return as soon as we have all requested prices\n            // This optimizes response time\n            const settledResults = await Promise.allSettled(pricePromises);\n            // Check if we have all prices we need\n            const hasAllPrices = uncachedIds.every((id)=>fetchedPrices[id.toLowerCase()]);\n            // Logging only in development\n            if (true) {\n                if (hasAllPrices) {\n                    console.log(\"[token-price] All prices found, returning early for speed\");\n                } else {\n                    const missing = uncachedIds.filter((id)=>!fetchedPrices[id.toLowerCase()]);\n                    if (missing.length > 0) {\n                        console.log(\"[token-price] Still missing prices:\", missing);\n                    }\n                }\n            }\n        }\n        const prices = {\n            ...cachedPrices,\n            ...fetchedPrices\n        };\n        // Logging only in development\n        if (true) {\n            console.log(\"[token-price] Final prices response:\", {\n                requestedIds: tokenIds,\n                foundPrices: Object.keys(prices)\n            });\n        }\n        // Return response with cache headers\n        // Cache for 30 seconds - prices update frequently but not too fast\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            prices\n        }, {\n            headers: {\n                \"Cache-Control\": \"public, s-maxage=30, stale-while-revalidate=60\"\n            }\n        });\n    } catch (error) {\n        // Always log errors, but sanitize in production\n        if (true) {\n            console.error(\"[token-price] Error:\", error);\n        } else {}\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch prices\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Rva2VuLXByaWNlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7OztDQU9DLEdBRXNEO0FBQ3BCO0FBRW5DLG1DQUFtQztBQUNuQyxNQUFNRSx3QkFBZ0Q7SUFDcEQsZ0JBQWdCO0lBQ2hCQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsT0FBTztJQUNQQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsSUFBSTtJQUNKQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsUUFBUTtJQUNSQyxPQUFPO0lBQ1BDLFFBQVE7SUFDUkMsT0FBTztJQUNQQyxRQUFRO0lBQ1JDLE9BQU87SUFDUEMsUUFBUTtJQUNSQyxRQUFRO0lBQ1JDLEtBQUs7SUFDTEMsV0FBVztJQUNYQyxNQUFNO0lBQ05DLE9BQU87SUFDUEMsR0FBRztJQUNIQyxNQUFNO0lBQ05DLE9BQU87SUFDUEMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsUUFBUTtJQUNSQyxLQUFLO0lBQ0xDLE9BQU87SUFDUEMsWUFBWTtJQUNaQyxLQUFLO0lBQ0xDLFdBQVc7SUFDWEMsTUFBTTtJQUNOQyxLQUFLO0lBQ0xDLE1BQU07SUFDTixlQUFlO0lBQ2YsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2ZDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxRQUFRO0lBQ1JDLFFBQVE7SUFDUkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLFVBQVU7SUFDVkMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxPQUFPO0lBQ1BDLE1BQU07SUFDTixTQUFTO0lBQ1RDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTCxlQUFlO0lBQ2YsbUJBQW1CO0lBQ25CdEQsS0FBSztJQUNMdUQsS0FBSztJQUNMeEQsSUFBSTtJQUNKeUQsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLElBQUk7SUFDSkMsT0FBTztJQUNQLGFBQWE7QUFDZjtBQUVBLDJDQUEyQztBQUMzQyxNQUFNQyxzQkFBOEM7SUFDbERyRSxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsT0FBTztJQUNQQyxLQUFLO0lBQ0xDLE1BQU07SUFDTlksS0FBSztJQUNMa0IsTUFBTTtJQUNOZCxHQUFHO0lBQ0hVLEtBQUs7SUFDTFAsS0FBSztJQUNMVSxLQUFLO0lBQ0xELE1BQU07SUFDTlgsTUFBTTtJQUNORyxNQUFNO0lBQ05OLE1BQU07SUFDTlMsS0FBSztJQUNMQyxPQUFPO0lBQ1BILE1BQU07SUFDTlcsS0FBSztJQUNML0IsSUFBSTtJQUNKQyxLQUFLO0lBQ0xxQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxPQUFPO0lBQ1AsU0FBUztJQUNURSxNQUFNO0lBQ05DLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLElBQUk7SUFDSkMsT0FBTztJQUNQLGFBQWE7SUFDYixlQUFlO0FBQ2pCO0FBRUEsbUVBQW1FO0FBQ25FLE1BQU1FLGdDQUF3RDtJQUM1RHRFLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxPQUFPO0lBQ1BFLE1BQU07SUFDTkMsSUFBSTtJQUNKQyxLQUFLO0lBQ0xDLE1BQU07SUFDTjJCLE1BQU07SUFDTmxCLEtBQUs7SUFDTFMsTUFBTTtJQUNOVyxLQUFLO0lBQ0xoQixHQUFHO0lBQ0hVLEtBQUs7SUFDTFAsS0FBSztJQUNMVSxLQUFLO0lBQ0xELE1BQU07SUFDTlgsTUFBTTtJQUNORyxNQUFNO0lBQ05OLE1BQU07SUFDTlMsS0FBSztJQUNMQyxPQUFPO0lBQ1BlLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE9BQU87SUFDUCxTQUFTO0lBQ1RFLE1BQU07SUFDTkMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsSUFBSTtJQUNKQyxPQUFPO0lBQ1AsYUFBYTtJQUNiLGVBQWU7QUFDakI7QUFFTyxNQUFNRyxVQUFVLFNBQVE7QUFFL0IsNkRBQTZEO0FBQzdELE1BQU1DLGNBQWMsSUFBSUM7QUFDeEIsTUFBTUMsZUFBZSxNQUFNLGFBQWE7O0FBQ3hDLE1BQU1DLHNCQUFzQixHQUFHLHVCQUF1Qjs7QUFFL0MsZUFBZUMsSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU1DLGVBQWVELFFBQVFFLE9BQU8sQ0FBQ0QsWUFBWTtRQUNqRCxNQUFNRSxXQUFXRixhQUFhRyxHQUFHLENBQUMsUUFBUUMsTUFBTSxLQUFLQyxPQUFPQyxZQUFZLEVBQUU7UUFFMUUsSUFBSUosU0FBU0ssTUFBTSxLQUFLLEdBQUc7WUFDekIsT0FBT3hGLHFEQUFZQSxDQUFDeUYsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF3QixHQUNqQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNRSxlQUF1QyxDQUFDO1FBQzlDLE1BQU1DLGNBQXdCLEVBQUU7UUFFaEMsd0NBQXdDO1FBQ3hDLEtBQUssTUFBTUMsTUFBTWIsU0FBVTtZQUN6QixNQUFNYyxXQUFXRCxHQUFHRSxXQUFXO1lBQy9CLE1BQU1DLFNBQVN4QixZQUFZUyxHQUFHLENBQUNhO1lBQy9CLElBQUlFLFVBQVVBLE9BQU9DLFNBQVMsR0FBR1IsS0FBSztnQkFDcENFLFlBQVksQ0FBQ0csU0FBUyxHQUFHRSxPQUFPRSxLQUFLO1lBQ3ZDLE9BQU87Z0JBQ0xOLFlBQVlPLElBQUksQ0FBQ0w7WUFDbkI7UUFDRjtRQUVBLCtEQUErRDtRQUMvRCxJQUFJRixZQUFZUCxNQUFNLEdBQUcsS0FBS2UsUUFBUUMsR0FBRyxDQUFDQyxzQkFBc0IsRUFBRTtZQUNoRSxJQUFJO2dCQUNGLE1BQU1DLFlBQVlYLFlBQVlZLEdBQUcsQ0FBQ1gsQ0FBQUEsS0FBTSxDQUFDLE1BQU0sRUFBRUEsR0FBRyxDQUFDO2dCQUNyRCxNQUFNWSxjQUFjLE1BQU1DLFFBQVFDLFVBQVUsQ0FDMUNKLFVBQVVDLEdBQUcsQ0FBQ0ksQ0FBQUEsTUFBTzlHLDZDQUFLQSxDQUFDbUYsR0FBRyxDQUFDMkI7Z0JBR2pDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJakIsWUFBWVAsTUFBTSxFQUFFd0IsSUFBSztvQkFDM0MsTUFBTUMsU0FBU0wsV0FBVyxDQUFDSSxFQUFFO29CQUM3QixJQUFJQyxPQUFPdEIsTUFBTSxLQUFLLGVBQWVzQixPQUFPQyxLQUFLLEVBQUU7d0JBQ2pELElBQUk7NEJBQ0YsTUFBTUEsUUFBUSxPQUFPRCxPQUFPQyxLQUFLLEtBQUssV0FBV0QsT0FBT0MsS0FBSyxHQUFHQyxPQUFPRixPQUFPQyxLQUFLOzRCQUNuRixNQUFNRSxTQUFTQyxLQUFLQyxLQUFLLENBQUNKOzRCQUMxQix1Q0FBdUM7NEJBQ3ZDLElBQUlFLE9BQU9mLEtBQUssR0FBRyxLQUFLLE1BQU9lLE9BQU9HLFNBQVMsR0FBSTFDLGNBQWM7Z0NBQy9ELE1BQU1tQixLQUFLRCxXQUFXLENBQUNpQixFQUFFO2dDQUN6QmxCLFlBQVksQ0FBQ0UsR0FBRyxHQUFHb0IsT0FBT2YsS0FBSztnQ0FDL0IseUJBQXlCO2dDQUN6QjFCLFlBQVk2QyxHQUFHLENBQUN4QixJQUFJO29DQUNsQkssT0FBT2UsT0FBT2YsS0FBSztvQ0FDbkJELFdBQVdSLE1BQU1mO2dDQUNuQjs0QkFDRjt3QkFDRixFQUFFLE9BQU07d0JBQ04sOEJBQThCO3dCQUNoQztvQkFDRjtnQkFDRjtZQUNGLEVBQUUsT0FBT2EsT0FBTztnQkFDZCw2Q0FBNkM7Z0JBQzdDLElBQUlhLElBQXlCLEVBQWU7b0JBQzFDa0IsUUFBUUMsSUFBSSxDQUFDO2dCQUNmO1lBQ0Y7WUFFQSwwQkFBMEI7WUFDMUIsTUFBTUMsb0JBQW9CNUIsWUFBWVQsTUFBTSxDQUFDVSxDQUFBQSxLQUFNLENBQUNGLFlBQVksQ0FBQ0UsR0FBRztZQUNwRUQsWUFBWVAsTUFBTSxHQUFHO1lBQ3JCTyxZQUFZTyxJQUFJLElBQUlxQjtRQUN0QjtRQUVBLElBQUlDLGdCQUF3QyxDQUFDO1FBQzdDLElBQUk3QixZQUFZUCxNQUFNLEdBQUcsR0FBRztZQUMxQixxQ0FBcUM7WUFDckMsTUFBTXFDLDBCQUEwQixJQUFJQztZQUNwQyxNQUFNQyx3QkFBZ0QsQ0FBQztZQUV2RCxLQUFLLE1BQU0vQixNQUFNRCxZQUFhO2dCQUM1QixNQUFNaUMsY0FBYzlILHFCQUFxQixDQUFDOEYsR0FBRyxJQUFJOUYscUJBQXFCLENBQUM4RixHQUFHRSxXQUFXLEdBQUc7Z0JBQ3hGLElBQUk4QixhQUFhO29CQUNmSCx3QkFBd0JJLEdBQUcsQ0FBQ0Q7b0JBQzVCRCxxQkFBcUIsQ0FBQy9CLEdBQUcsR0FBR2dDO2dCQUM5QjtZQUNGO1lBRUEsTUFBTUUsdUJBQXVCQyxNQUFNQyxJQUFJLENBQUNQO1lBRXhDLHVEQUF1RDtZQUN2RCxNQUFNUSxnQkFBaUMsRUFBRTtZQUV6QywrQkFBK0I7WUFDL0IsSUFBSUgscUJBQXFCMUMsTUFBTSxHQUFHLEdBQUc7Z0JBQ25DLE1BQU04QyxXQUFXSixxQkFBcUJLLElBQUksQ0FBQztnQkFDM0MsTUFBTUMsTUFBTSxDQUFDLGtEQUFrRCxFQUFFRixTQUFTLGtCQUFrQixDQUFDO2dCQUU3RkQsY0FBYy9CLElBQUksQ0FDaEJtQyxNQUFNRCxLQUFLO29CQUFFRSxRQUFRQyxZQUFZQyxPQUFPLENBQUM7Z0JBQU0sR0FDNUNDLElBQUksQ0FBQyxPQUFPQztvQkFDWCxJQUFJQSxTQUFTQyxFQUFFLEVBQUU7d0JBQ2YsTUFBTUMsT0FBTyxNQUFNRixTQUFTckQsSUFBSTt3QkFFaEMsK0NBQStDO3dCQUMvQyxLQUFLLE1BQU0sQ0FBQ3dELFlBQVlqQixZQUFZLElBQUlrQixPQUFPQyxPQUFPLENBQUNwQix1QkFBd0I7NEJBQzdFLElBQUlpQixJQUFJLENBQUNoQixZQUFZLElBQUksT0FBT2dCLElBQUksQ0FBQ2hCLFlBQVksS0FBSyxZQUFZLFNBQVNnQixJQUFJLENBQUNoQixZQUFZLEVBQUU7Z0NBQzVGLE1BQU0zQixRQUFRLElBQUssQ0FBQzJCLFlBQVksQ0FBU29CLEdBQUc7Z0NBQzVDLElBQUksT0FBTy9DLFVBQVUsWUFBWUEsUUFBUSxHQUFHO29DQUMxQyxNQUFNZ0Qsa0JBQWtCSixXQUFXL0MsV0FBVztvQ0FDOUMsSUFBSSxDQUFDMEIsYUFBYSxDQUFDeUIsZ0JBQWdCLEVBQUU7d0NBQ25DekIsYUFBYSxDQUFDeUIsZ0JBQWdCLEdBQUdoRDt3Q0FDakMsTUFBTUosV0FBV2dELFdBQVcvQyxXQUFXO3dDQUN2Qyx5QkFBeUI7d0NBQ3pCdkIsWUFBWTZDLEdBQUcsQ0FBQ3ZCLFVBQVU7NENBQ3hCSTs0Q0FDQUQsV0FBV1IsTUFBTWY7d0NBQ25CO3dDQUNBLHVFQUF1RTt3Q0FDdkUsSUFBSTBCLFFBQVFDLEdBQUcsQ0FBQ0Msc0JBQXNCLEVBQUU7NENBQ3RDeEcsNkNBQUtBLENBQUNxSixLQUFLLENBQUMsQ0FBQyxNQUFNLEVBQUVyRCxTQUFTLENBQUMsRUFBRW5CLHFCQUFxQnVDLEtBQUtrQyxTQUFTLENBQUM7Z0RBQUVsRDtnREFBT2tCLFdBQVczQjs0Q0FBSSxJQUFJNEQsS0FBSyxDQUFDLEtBQU87d0NBQ2hIO29DQUNGO2dDQUNGOzRCQUNGO3dCQUNGO3dCQUVBLGdEQUFnRDt3QkFDaEQsS0FBSyxNQUFNLENBQUNDLFNBQVN6QixZQUFZLElBQUlrQixPQUFPQyxPQUFPLENBQUNqSix1QkFBd0I7NEJBQzFFLElBQUkySCx3QkFBd0I2QixHQUFHLENBQUMxQixnQkFBZ0JnQixJQUFJLENBQUNoQixZQUFZLElBQUksT0FBT2dCLElBQUksQ0FBQ2hCLFlBQVksS0FBSyxZQUFZLFNBQVNnQixJQUFJLENBQUNoQixZQUFZLEVBQUU7Z0NBQ3hJLE1BQU0zQixRQUFRLElBQUssQ0FBQzJCLFlBQVksQ0FBU29CLEdBQUc7Z0NBQzVDLElBQUksT0FBTy9DLFVBQVUsWUFBWUEsUUFBUSxHQUFHO29DQUMxQyxNQUFNc0QsZUFBZUYsUUFBUXZELFdBQVc7b0NBQ3hDLElBQUksQ0FBQzBCLGFBQWEsQ0FBQytCLGFBQWEsRUFBRTt3Q0FDaEMvQixhQUFhLENBQUMrQixhQUFhLEdBQUd0RDt3Q0FDOUIseUJBQXlCO3dDQUN6QjFCLFlBQVk2QyxHQUFHLENBQUNtQyxjQUFjOzRDQUM1QnREOzRDQUNBRCxXQUFXUixNQUFNZjt3Q0FDbkI7d0NBQ0EsdUVBQXVFO3dDQUN2RSxJQUFJMEIsUUFBUUMsR0FBRyxDQUFDQyxzQkFBc0IsRUFBRTs0Q0FDdEN4Ryw2Q0FBS0EsQ0FBQ3FKLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRUssYUFBYSxDQUFDLEVBQUU3RSxxQkFBcUJ1QyxLQUFLa0MsU0FBUyxDQUFDO2dEQUFFbEQ7Z0RBQU9rQixXQUFXM0I7NENBQUksSUFBSTRELEtBQUssQ0FBQyxLQUFPO3dDQUNwSDtvQ0FDRjtnQ0FDRjs0QkFDRjt3QkFDRjtvQkFDRjtnQkFDRixHQUNDQSxLQUFLLENBQUM7Z0JBQ0wseUNBQXlDO2dCQUMzQztZQUVOO1lBRUEsb0RBQW9EO1lBQ3BELE1BQU1JLFlBQVlyRCxRQUFRQyxHQUFHLENBQUNxRCxxQkFBcUI7WUFDbkQsSUFBSUQsYUFBYTdELFlBQVlQLE1BQU0sR0FBRyxHQUFHO2dCQUN2QyxNQUFNc0UsYUFBYS9ELFlBQ2hCWSxHQUFHLENBQUNYLENBQUFBLEtBQU14QixtQkFBbUIsQ0FBQ3dCLEdBQUcsSUFBSUEsR0FBRytELFdBQVcsSUFDbkR6RSxNQUFNLENBQUNDLFNBQ1BnRCxJQUFJLENBQUM7Z0JBRVIsSUFBSXVCLFlBQVk7b0JBQ2R6QixjQUFjL0IsSUFBSSxDQUNoQm1DLE1BQU0sQ0FBQyx5RUFBeUUsRUFBRXFCLFdBQVcsWUFBWSxDQUFDLEVBQUU7d0JBQzFHRSxTQUFTOzRCQUFFLHFCQUFxQko7d0JBQVU7d0JBQzFDbEIsUUFBUUMsWUFBWUMsT0FBTyxDQUFDO29CQUM5QixHQUNHQyxJQUFJLENBQUMsT0FBT0M7d0JBQ1gsSUFBSUEsU0FBU0MsRUFBRSxFQUFFOzRCQUNmLE1BQU1rQixVQUFVLE1BQU1uQixTQUFTckQsSUFBSTs0QkFFbkMsSUFBSXdFLFFBQVFqQixJQUFJLEVBQUU7Z0NBQ2hCLEtBQUssTUFBTSxDQUFDa0IsUUFBUUMsTUFBTSxJQUFJakIsT0FBT0MsT0FBTyxDQUFDYyxRQUFRakIsSUFBSSxFQUFHO29DQUMxRCxJQUFJbUIsU0FBU2hDLE1BQU1pQyxPQUFPLENBQUNELFVBQVVBLE1BQU0zRSxNQUFNLEdBQUcsS0FBSzJFLEtBQUssQ0FBQyxFQUFFLENBQUNFLEtBQUssRUFBRUMsS0FBS2pFLE9BQU87d0NBQ25GLE1BQU1BLFFBQVE4RCxLQUFLLENBQUMsRUFBRSxDQUFDRSxLQUFLLENBQUNDLEdBQUcsQ0FBQ2pFLEtBQUs7d0NBQ3RDLE1BQU1rRSxjQUFjTCxPQUFPaEUsV0FBVzt3Q0FFdEMsS0FBSyxNQUFNdUQsV0FBVzFELFlBQWE7NENBQ2pDLE1BQU15RSxZQUFZaEcsbUJBQW1CLENBQUNpRixRQUFRLElBQUlBLFFBQVFNLFdBQVc7NENBQ3JFLElBQUksQ0FBQ1MsY0FBY04sVUFBVUssZ0JBQWdCZCxPQUFNLEtBQU0sQ0FBQzdCLGFBQWEsQ0FBQzZCLFFBQVEsRUFBRTtnREFDaEY3QixhQUFhLENBQUM2QixRQUFRLEdBQUdwRDtnREFDekIseUJBQXlCO2dEQUN6QjFCLFlBQVk2QyxHQUFHLENBQUNpQyxTQUFTO29EQUN2QnBEO29EQUNBRCxXQUFXUixNQUFNZjtnREFDbkI7Z0RBQ0EsdUVBQXVFO2dEQUN2RSxJQUFJMEIsUUFBUUMsR0FBRyxDQUFDQyxzQkFBc0IsRUFBRTtvREFDdEN4Ryw2Q0FBS0EsQ0FBQ3FKLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRUcsUUFBUSxDQUFDLEVBQUUzRSxxQkFBcUJ1QyxLQUFLa0MsU0FBUyxDQUFDO3dEQUFFbEQ7d0RBQU9rQixXQUFXM0I7b0RBQUksSUFBSTRELEtBQUssQ0FBQyxLQUFPO2dEQUMvRztnREFDQTs0Q0FDRjt3Q0FDRjtvQ0FDRjtnQ0FDRjs0QkFDRjt3QkFDRjtvQkFDRixHQUNDQSxLQUFLLENBQUM7b0JBQ0wsZ0JBQWdCO29CQUNsQjtnQkFFTjtZQUNGO1lBRUEsb0NBQW9DO1lBQ3BDLElBQUl6RCxZQUFZUCxNQUFNLEdBQUcsR0FBRztnQkFDMUIsTUFBTWlGLFlBQVkxRSxZQUNmWSxHQUFHLENBQUNYLENBQUFBLEtBQU12Qiw2QkFBNkIsQ0FBQ3VCLEdBQUcsSUFBSUEsR0FBRytELFdBQVcsSUFDN0R6RSxNQUFNLENBQUNDLFNBQ1BnRCxJQUFJLENBQUM7Z0JBRVIsSUFBSWtDLFdBQVc7b0JBQ2JwQyxjQUFjL0IsSUFBSSxDQUNoQm1DLE1BQU0sQ0FBQyx3REFBd0QsRUFBRWdDLFVBQVUsVUFBVSxDQUFDLEVBQUU7d0JBQ3RGL0IsUUFBUUMsWUFBWUMsT0FBTyxDQUFDO29CQUM5QixHQUNHQyxJQUFJLENBQUMsT0FBT0M7d0JBQ1gsSUFBSUEsU0FBU0MsRUFBRSxFQUFFOzRCQUNmLE1BQU0yQixTQUFTLE1BQU01QixTQUFTckQsSUFBSTs0QkFFbEMsS0FBSyxNQUFNLENBQUN5RSxRQUFRUyxVQUFVLElBQUl6QixPQUFPQyxPQUFPLENBQUN1QixRQUFTO2dDQUN4RCxJQUFJQyxXQUFXTCxPQUFPLE9BQU9LLFVBQVVMLEdBQUcsS0FBSyxZQUFZSyxVQUFVTCxHQUFHLEdBQUcsR0FBRztvQ0FDNUUsTUFBTUMsY0FBY0wsT0FBT2hFLFdBQVc7b0NBRXRDLEtBQUssTUFBTXVELFdBQVcxRCxZQUFhO3dDQUNqQyxNQUFNNkUsV0FBV25HLDZCQUE2QixDQUFDZ0YsUUFBUSxJQUFJQSxRQUFRTSxXQUFXO3dDQUM5RSxJQUFJLENBQUNhLGFBQWFWLFVBQVVLLGdCQUFnQmQsT0FBTSxLQUFNLENBQUM3QixhQUFhLENBQUM2QixRQUFRLEVBQUU7NENBQy9FN0IsYUFBYSxDQUFDNkIsUUFBUSxHQUFHa0IsVUFBVUwsR0FBRzs0Q0FDdEMseUJBQXlCOzRDQUN6QjNGLFlBQVk2QyxHQUFHLENBQUNpQyxTQUFTO2dEQUN2QnBELE9BQU9zRSxVQUFVTCxHQUFHO2dEQUNwQmxFLFdBQVdSLE1BQU1mOzRDQUNuQjs0Q0FDQSx1RUFBdUU7NENBQ3ZFLElBQUkwQixRQUFRQyxHQUFHLENBQUNDLHNCQUFzQixFQUFFO2dEQUN0Q3hHLDZDQUFLQSxDQUFDcUosS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFRyxRQUFRLENBQUMsRUFBRTNFLHFCQUFxQnVDLEtBQUtrQyxTQUFTLENBQUM7b0RBQUVsRCxPQUFPc0UsVUFBVUwsR0FBRztvREFBRS9DLFdBQVczQjtnREFBSSxJQUFJNEQsS0FBSyxDQUFDLEtBQU87NENBQzlIOzRDQUNBO3dDQUNGO29DQUNGO2dDQUNGOzRCQUNGO3dCQUNGO29CQUNGLEdBQ0NBLEtBQUssQ0FBQztvQkFDTCxnQkFBZ0I7b0JBQ2xCO2dCQUVOO1lBQ0Y7WUFFQSwrRkFBK0Y7WUFDL0YsK0JBQStCO1lBQy9CLE1BQU1xQixpQkFBaUIsTUFBTWhFLFFBQVFDLFVBQVUsQ0FBQ3VCO1lBRWhELHNDQUFzQztZQUN0QyxNQUFNeUMsZUFBZS9FLFlBQVlnRixLQUFLLENBQUMvRSxDQUFBQSxLQUFNNEIsYUFBYSxDQUFDNUIsR0FBR0UsV0FBVyxHQUFHO1lBRTVFLDhCQUE4QjtZQUM5QixJQUFJSyxJQUF5QixFQUFlO2dCQUMxQyxJQUFJdUUsY0FBYztvQkFDaEJyRCxRQUFRdUQsR0FBRyxDQUFDO2dCQUNkLE9BQU87b0JBQ0wsTUFBTUMsVUFBVWxGLFlBQVlULE1BQU0sQ0FBQ1UsQ0FBQUEsS0FBTSxDQUFDNEIsYUFBYSxDQUFDNUIsR0FBR0UsV0FBVyxHQUFHO29CQUN6RSxJQUFJK0UsUUFBUXpGLE1BQU0sR0FBRyxHQUFHO3dCQUN0QmlDLFFBQVF1RCxHQUFHLENBQUMsdUNBQXVDQztvQkFDckQ7Z0JBQ0Y7WUFDRjtRQUNGO1FBRUEsTUFBTUMsU0FBUztZQUFFLEdBQUdwRixZQUFZO1lBQUUsR0FBRzhCLGFBQWE7UUFBQztRQUVuRCw4QkFBOEI7UUFDOUIsSUFBSXJCLElBQXlCLEVBQWU7WUFDMUNrQixRQUFRdUQsR0FBRyxDQUFDLHdDQUF3QztnQkFDbERHLGNBQWNoRztnQkFDZGlHLGFBQWFsQyxPQUFPbUMsSUFBSSxDQUFDSDtZQUMzQjtRQUNGO1FBRUEscUNBQXFDO1FBQ3JDLG1FQUFtRTtRQUNuRSxPQUFPbEwscURBQVlBLENBQUN5RixJQUFJLENBQUM7WUFBRXlGO1FBQU8sR0FBRztZQUNuQ2xCLFNBQVM7Z0JBQ1AsaUJBQWlCO1lBQ25CO1FBQ0Y7SUFDRixFQUFFLE9BQU90RSxPQUFPO1FBQ2QsZ0RBQWdEO1FBQ2hELElBQUlhLElBQXlCLEVBQWU7WUFDMUNrQixRQUFRL0IsS0FBSyxDQUFDLHdCQUF3QkE7UUFDeEMsT0FBTyxFQUVOO1FBQ0QsT0FBTzFGLHFEQUFZQSxDQUFDeUYsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQXlCLEdBQ2xDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2llbHN3YXAtbGFuZGluZy8uL2FwcC9hcGkvdG9rZW4tcHJpY2Uvcm91dGUudHM/ZTYxMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVG9rZW4gcHJpY2UgQVBJIGVuZHBvaW50XHJcbiAqIEZldGNoZXMgdG9rZW4gcHJpY2VzIGZyb20gbXVsdGlwbGUgc291cmNlczpcclxuICogMS4gQ29pbkdlY2tvIEFQSSAocHJpbWFyeSwgZnJlZSwgbm8gQVBJIGtleSByZXF1aXJlZClcclxuICogMi4gQ29pbk1hcmtldENhcCBBUEkgKGZhbGxiYWNrLCByZXF1aXJlcyBBUEkga2V5KVxyXG4gKiAzLiBDcnlwdG9Db21wYXJlIEFQSSAoYWRkaXRpb25hbCBzb3VyY2UpXHJcbiAqIFVzZWQgYXMgZmFsbGJhY2sgZm9yIGNhbGN1bGF0aW5nIGV4Y2hhbmdlIHJhdGVzIHdoZW4gcHJvdmlkZXJzIGRvbid0IHdvcmtcclxuICovXHJcblxyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IHJlZGlzIH0gZnJvbSAnQC9saWIvcmVkaXMnXHJcblxyXG4vLyBUb2tlbiBJRCB0byBDb2luR2Vja28gSUQgbWFwcGluZ1xyXG5jb25zdCBUT0tFTl9UT19DT0lOR0VDS09fSUQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgLy8gTmF0aXZlIHRva2Vuc1xyXG4gIGV0aDogJ2V0aGVyZXVtJyxcclxuICBibmI6ICdiaW5hbmNlY29pbicsXHJcbiAgbWF0aWM6ICdtYXRpYy1uZXR3b3JrJyxcclxuICBwb2w6ICdtYXRpYy1uZXR3b3JrJyxcclxuICBhdmF4OiAnYXZhbGFuY2hlLTInLFxyXG4gIG9wOiAnb3B0aW1pc20nLFxyXG4gIGFyYjogJ2FyYml0cnVtJyxcclxuICBiYXNlOiAnYmFzZScsXHJcbiAgemtzeW5jOiAnemtzeW5jJyxcclxuICBsaW5lYTogJ2xpbmVhJyxcclxuICBzY3JvbGw6ICdzY3JvbGwnLFxyXG4gIGJsYXN0OiAnYmxhc3QnLFxyXG4gIGdub3NpczogJ2dub3NpcycsXHJcbiAgb3BibmI6ICdvcGJuYicsXHJcbiAgbWFudGxlOiAnbWFudGxlJyxcclxuICBjcm9ub3M6ICdjcm9ub3MnLFxyXG4gIGNybzogJ2NyeXB0by1jb20tY2hhaW4nLFxyXG4gIHJvb3RzdG9jazogJ3Jvb3RzdG9jaycsXHJcbiAgcmJ0YzogJ3Jvb3RzdG9jaycsXHJcbiAgc29uaWM6ICdzb25pYycsXHJcbiAgczogJ3NvbmljJyxcclxuICBjb3JlOiAnY29yZWRhb29yZycsXHJcbiAgcm9uaW46ICdyb25pbicsXHJcbiAgcm9uOiAncm9uaW4nLFxyXG4gIHhkYWk6ICdnbm9zaXMnLFxyXG4gIGthdmE6ICdrYXZhJyxcclxuICBwbGFzbWE6ICdwbGFzbWEnLFxyXG4gIHhwbDogJ3BsYXNtYScsXHJcbiAgcGx1bWU6ICdwbHVtZScsXHJcbiAgcHVsc2VjaGFpbjogJ3B1bHNlY2hhaW4nLFxyXG4gIHBsczogJ3B1bHNlY2hhaW4nLFxyXG4gIGJlcmFjaGFpbjogJ2JlcmFjaGFpbicsXHJcbiAgYmVyYTogJ2JlcmFjaGFpbicsXHJcbiAgbW50OiAnbWFudGxlJyxcclxuICBjZWxvOiAnY2VsbycsXHJcbiAgJ2ltbXV0YWJsZSB4JzogJ2ltbXV0YWJsZS14JyxcclxuICAnaW1tdXRhYmxlLXprZXZtJzogJ2ltbXV0YWJsZS14JyxcclxuICAnd29ybGQgKGNoYWluKSc6ICd3b3JsZGNvaW4td2xkJyxcclxuICAnd29ybGQtY2hhaW4nOiAnd29ybGRjb2luLXdsZCcsXHJcbiAgZ29hdDogJ2dvYXQnLFxyXG4gIGJ0YzogJ2JpdGNvaW4nLFxyXG4gIG1lcmxpbjogJ21lcmxpbicsXHJcbiAga2F0YW5hOiAna2F0YW5hJyxcclxuICBpbms6ICdpbmsnLFxyXG4gIGJvYjogJ2JvYicsXHJcbiAgYWJzdHJhY3Q6ICdhYnN0cmFjdCcsXHJcbiAgbW9uOiAnbW9uYWQnLFxyXG4gIHVzZGM6ICd1c2QtY29pbicsXHJcbiAgdXNkdDogJ3RldGhlcicsXHJcbiAgZGFpOiAnZGFpJyxcclxuICB3ZXRoOiAnd2V0aCcsXHJcbiAgd2J0YzogJ3dyYXBwZWQtYml0Y29pbicsXHJcbiAgbGluazogJ2NoYWlubGluaycsXHJcbiAgdW5pOiAndW5pc3dhcCcsXHJcbiAgYWF2ZTogJ2FhdmUnLFxyXG4gIGNydjogJ2N1cnZlLWRhby10b2tlbicsXHJcbiAgbWtyOiAnbWFrZXInLFxyXG4gIHNueDogJ2hhdnZlbicsXHJcbiAgY29tcDogJ2NvbXBvdW5kLWdvdmVybmFuY2UtdG9rZW4nLFxyXG4gIHN1c2hpOiAnc3VzaGknLFxyXG4gIHN1c2Q6ICdudXNkJyxcclxuICAnMWluY2gnOiAnMWluY2gnLFxyXG4gIGZyYXg6ICdmcmF4JyxcclxuICBmeHM6ICdmcmF4LXNoYXJlJyxcclxuICBsZG86ICdsaWRvLWRhbycsXHJcbiAgZ3J0OiAndGhlLWdyYXBoJyxcclxuICAnbWF0aWMtZXJjMjAnOiAnbWF0aWMtbmV0d29yaycsXHJcbiAgLy8gRWNvc3lzdGVtIHRva2Vuc1xyXG4gIGFyYjogJ2FyYml0cnVtJyxcclxuICBnbXg6ICdnbXgnLFxyXG4gIG9wOiAnb3B0aW1pc20nLFxyXG4gIHZlbG86ICd2ZWxvZHJvbWUtZmluYW5jZScsXHJcbiAgYWVybzogJ2Flcm9kcm9tZS1maW5hbmNlJyxcclxuICBjYWtlOiAncGFuY2FrZXN3YXAtdG9rZW4nLFxyXG4gIHh2czogJ3ZlbnVzJyxcclxuICBqb2U6ICd0cmFkZXItam9lJyxcclxuICBxaTogJ3FpLWRhbycsXHJcbiAgcXVpY2s6ICdxdWlja3N3YXAnLFxyXG4gICdtbnQtdG9rZW4nOiAnbWFudGxlJyxcclxufVxyXG5cclxuLy8gVG9rZW4gSUQgdG8gQ29pbk1hcmtldENhcCBzeW1ib2wgbWFwcGluZ1xyXG5jb25zdCBUT0tFTl9UT19DTUNfU1lNQk9MOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gIGV0aDogJ0VUSCcsXHJcbiAgYm5iOiAnQk5CJyxcclxuICBtYXRpYzogJ01BVElDJyxcclxuICBwb2w6ICdQT0wnLFxyXG4gIGF2YXg6ICdBVkFYJyxcclxuICBjcm86ICdDUk8nLFxyXG4gIGNlbG86ICdDRUxPJyxcclxuICBzOiAnUycsXHJcbiAgcGxzOiAnUExTJyxcclxuICByb246ICdST04nLFxyXG4gIG1udDogJ01OVCcsXHJcbiAgYmVyYTogJ0JFUkEnLFxyXG4gIGNvcmU6ICdDT1JFJyxcclxuICB4ZGFpOiAnWERBSScsXHJcbiAgcmJ0YzogJ1JCVEMnLFxyXG4gIHhwbDogJ1hQTCcsXHJcbiAgcGx1bWU6ICdQTFVNRScsXHJcbiAga2F2YTogJ0tBVkEnLFxyXG4gIGJ0YzogJ0JUQycsXHJcbiAgb3A6ICdPUCcsXHJcbiAgYXJiOiAnQVJCJyxcclxuICB1c2RjOiAnVVNEQycsXHJcbiAgdXNkdDogJ1VTRFQnLFxyXG4gIGRhaTogJ0RBSScsXHJcbiAgd2V0aDogJ1dFVEgnLFxyXG4gIHdidGM6ICdXQlRDJyxcclxuICBsaW5rOiAnTElOSycsXHJcbiAgdW5pOiAnVU5JJyxcclxuICBhYXZlOiAnQUFWRScsXHJcbiAgY3J2OiAnQ1JWJyxcclxuICBta3I6ICdNS1InLFxyXG4gIHNueDogJ1NOWCcsXHJcbiAgY29tcDogJ0NPTVAnLFxyXG4gIHN1c2hpOiAnU1VTSEknLFxyXG4gICcxaW5jaCc6ICcxSU5DSCcsXHJcbiAgZnJheDogJ0ZSQVgnLFxyXG4gIGZ4czogJ0ZYUycsXHJcbiAgbGRvOiAnTERPJyxcclxuICBncnQ6ICdHUlQnLFxyXG4gIGdteDogJ0dNWCcsXHJcbiAgdmVsbzogJ1ZFTE8nLFxyXG4gIGFlcm86ICdBRVJPJyxcclxuICBjYWtlOiAnQ0FLRScsXHJcbiAgeHZzOiAnWFZTJyxcclxuICBqb2U6ICdKT0UnLFxyXG4gIHFpOiAnUUknLFxyXG4gIHF1aWNrOiAnUVVJQ0snLFxyXG4gICdtbnQtdG9rZW4nOiAnTU5UJyxcclxuICAnbWF0aWMtZXJjMjAnOiAnTUFUSUMnLFxyXG59XHJcblxyXG4vLyBUb2tlbiBJRCB0byBDcnlwdG9Db21wYXJlIHN5bWJvbCBtYXBwaW5nIChmb3IgQ3J5cHRvQ29tcGFyZSBBUEkpXHJcbmNvbnN0IFRPS0VOX1RPX0NSWVBUT0NPTVBBUkVfU1lNQk9MOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gIGV0aDogJ0VUSCcsXHJcbiAgYm5iOiAnQk5CJyxcclxuICBtYXRpYzogJ01BVElDJyxcclxuICBhdmF4OiAnQVZBWCcsXHJcbiAgb3A6ICdPUCcsXHJcbiAgYXJiOiAnQVJCJyxcclxuICBiYXNlOiAnQkFTRScsXHJcbiAgY2VsbzogJ0NFTE8nLFxyXG4gIGNybzogJ0NSTycsXHJcbiAga2F2YTogJ0tBVkEnLFxyXG4gIGJ0YzogJ0JUQycsXHJcbiAgczogJ1MnLFxyXG4gIHBsczogJ1BMUycsXHJcbiAgcm9uOiAnUk9OJyxcclxuICBtbnQ6ICdNTlQnLFxyXG4gIGJlcmE6ICdCRVJBJyxcclxuICBjb3JlOiAnQ09SRScsXHJcbiAgeGRhaTogJ1hEQUknLFxyXG4gIHJidGM6ICdSQlRDJyxcclxuICB4cGw6ICdYUEwnLFxyXG4gIHBsdW1lOiAnUExVTUUnLFxyXG4gIHVzZGM6ICdVU0RDJyxcclxuICB1c2R0OiAnVVNEVCcsXHJcbiAgZGFpOiAnREFJJyxcclxuICB3ZXRoOiAnV0VUSCcsXHJcbiAgd2J0YzogJ1dCVEMnLFxyXG4gIGxpbms6ICdMSU5LJyxcclxuICB1bmk6ICdVTkknLFxyXG4gIGFhdmU6ICdBQVZFJyxcclxuICBjcnY6ICdDUlYnLFxyXG4gIG1rcjogJ01LUicsXHJcbiAgc254OiAnU05YJyxcclxuICBjb21wOiAnQ09NUCcsXHJcbiAgc3VzaGk6ICdTVVNISScsXHJcbiAgJzFpbmNoJzogJzFJTkNIJyxcclxuICBmcmF4OiAnRlJBWCcsXHJcbiAgZnhzOiAnRlhTJyxcclxuICBsZG86ICdMRE8nLFxyXG4gIGdydDogJ0dSVCcsXHJcbiAgZ214OiAnR01YJyxcclxuICB2ZWxvOiAnVkVMTycsXHJcbiAgYWVybzogJ0FFUk8nLFxyXG4gIGNha2U6ICdDQUtFJyxcclxuICB4dnM6ICdYVlMnLFxyXG4gIGpvZTogJ0pPRScsXHJcbiAgcWk6ICdRSScsXHJcbiAgcXVpY2s6ICdRVUlDSycsXHJcbiAgJ21udC10b2tlbic6ICdNTlQnLFxyXG4gICdtYXRpYy1lcmMyMCc6ICdNQVRJQycsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcydcclxuXHJcbi8vIEluLW1lbW9yeSBjYWNoZSBhcyBmYWxsYmFjayAoZmFzdGVyIGZvciBmcmVxdWVudCByZXF1ZXN0cylcclxuY29uc3QgbWVtb3J5Q2FjaGUgPSBuZXcgTWFwPHN0cmluZywgeyBwcmljZTogbnVtYmVyOyBleHBpcmVzQXQ6IG51bWJlciB9PigpXHJcbmNvbnN0IENBQ0hFX1RUTF9NUyA9IDYwMDAwIC8vIDYwIHNlY29uZHNcclxuY29uc3QgUkVESVNfQ0FDSEVfVFRMX1NFQyA9IDYwIC8vIFJlZGlzIFRUTCBpbiBzZWNvbmRzXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXNcclxuICAgIGNvbnN0IHRva2VuSWRzID0gc2VhcmNoUGFyYW1zLmdldCgnaWRzJyk/LnNwbGl0KCcsJykuZmlsdGVyKEJvb2xlYW4pIHx8IFtdXHJcbiAgICBcclxuICAgIGlmICh0b2tlbklkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdNaXNzaW5nIGlkcyBwYXJhbWV0ZXInIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXHJcbiAgICBjb25zdCBjYWNoZWRQcmljZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxyXG4gICAgY29uc3QgdW5jYWNoZWRJZHM6IHN0cmluZ1tdID0gW11cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaW4tbWVtb3J5IGNhY2hlIGZpcnN0IChmYXN0ZXN0KVxyXG4gICAgZm9yIChjb25zdCBpZCBvZiB0b2tlbklkcykge1xyXG4gICAgICBjb25zdCBjYWNoZUtleSA9IGlkLnRvTG93ZXJDYXNlKClcclxuICAgICAgY29uc3QgY2FjaGVkID0gbWVtb3J5Q2FjaGUuZ2V0KGNhY2hlS2V5KVxyXG4gICAgICBpZiAoY2FjaGVkICYmIGNhY2hlZC5leHBpcmVzQXQgPiBub3cpIHtcclxuICAgICAgICBjYWNoZWRQcmljZXNbY2FjaGVLZXldID0gY2FjaGVkLnByaWNlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdW5jYWNoZWRJZHMucHVzaChjYWNoZUtleSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBSZWRpcyBjYWNoZSBmb3IgdW5jYWNoZWQgaXRlbXMgKGlmIFJlZGlzIGlzIGF2YWlsYWJsZSlcclxuICAgIGlmICh1bmNhY2hlZElkcy5sZW5ndGggPiAwICYmIHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWRpc0tleXMgPSB1bmNhY2hlZElkcy5tYXAoaWQgPT4gYHByaWNlOiR7aWR9YClcclxuICAgICAgICBjb25zdCByZWRpc1ZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChcclxuICAgICAgICAgIHJlZGlzS2V5cy5tYXAoa2V5ID0+IHJlZGlzLmdldChrZXkpKVxyXG4gICAgICAgIClcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVuY2FjaGVkSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSByZWRpc1ZhbHVlc1tpXVxyXG4gICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHJlc3VsdC52YWx1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIHJlc3VsdC52YWx1ZSA9PT0gJ3N0cmluZycgPyByZXN1bHQudmFsdWUgOiBTdHJpbmcocmVzdWx0LnZhbHVlKVxyXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodmFsdWUpIGFzIHsgcHJpY2U6IG51bWJlcjsgdGltZXN0YW1wOiBudW1iZXIgfVxyXG4gICAgICAgICAgICAgIC8vIFVzZSBpZiBjYWNoZWQgd2l0aGluIGxhc3QgNjAgc2Vjb25kc1xyXG4gICAgICAgICAgICAgIGlmIChwYXJzZWQucHJpY2UgPiAwICYmIChub3cgLSBwYXJzZWQudGltZXN0YW1wKSA8IENBQ0hFX1RUTF9NUykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB1bmNhY2hlZElkc1tpXVxyXG4gICAgICAgICAgICAgICAgY2FjaGVkUHJpY2VzW2lkXSA9IHBhcnNlZC5wcmljZVxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSBjYWNoZVxyXG4gICAgICAgICAgICAgICAgbWVtb3J5Q2FjaGUuc2V0KGlkLCB7XHJcbiAgICAgICAgICAgICAgICAgIHByaWNlOiBwYXJzZWQucHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogbm93ICsgQ0FDSEVfVFRMX01TLFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgIC8vIEludmFsaWQgY2FjaGUgZW50cnksIGlnbm9yZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIFJlZGlzIHVuYXZhaWxhYmxlLCBjb250aW51ZSB3aXRoIEFQSSBmZXRjaFxyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdbdG9rZW4tcHJpY2VdIFJlZGlzIHVuYXZhaWxhYmxlLCB1c2luZyBpbi1tZW1vcnkgY2FjaGUgb25seScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaWx0ZXIgb3V0IGNhY2hlZCBpdGVtc1xyXG4gICAgICBjb25zdCByZW1haW5pbmdVbmNhY2hlZCA9IHVuY2FjaGVkSWRzLmZpbHRlcihpZCA9PiAhY2FjaGVkUHJpY2VzW2lkXSlcclxuICAgICAgdW5jYWNoZWRJZHMubGVuZ3RoID0gMFxyXG4gICAgICB1bmNhY2hlZElkcy5wdXNoKC4uLnJlbWFpbmluZ1VuY2FjaGVkKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBmZXRjaGVkUHJpY2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge31cclxuICAgIGlmICh1bmNhY2hlZElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIFByZXBhcmUgbWFwcGluZ3MgZm9yIGFsbCBwcm92aWRlcnNcclxuICAgICAgY29uc3QgdW5jYWNoZWRDb2luZ2Vja29JZHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxyXG4gICAgICBjb25zdCB0b2tlbklkVG9Db2luZ2Vja29NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBpZCBvZiB1bmNhY2hlZElkcykge1xyXG4gICAgICAgIGNvbnN0IGNvaW5nZWNrb0lkID0gVE9LRU5fVE9fQ09JTkdFQ0tPX0lEW2lkXSB8fCBUT0tFTl9UT19DT0lOR0VDS09fSURbaWQudG9Mb3dlckNhc2UoKV1cclxuICAgICAgICBpZiAoY29pbmdlY2tvSWQpIHtcclxuICAgICAgICAgIHVuY2FjaGVkQ29pbmdlY2tvSWRzU2V0LmFkZChjb2luZ2Vja29JZClcclxuICAgICAgICAgIHRva2VuSWRUb0NvaW5nZWNrb01hcFtpZF0gPSBjb2luZ2Vja29JZFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgdW5jYWNoZWRDb2luZ2Vja29JZHMgPSBBcnJheS5mcm9tKHVuY2FjaGVkQ29pbmdlY2tvSWRzU2V0KVxyXG4gICAgICBcclxuICAgICAgLy8gUGFyYWxsZWwgZmV0Y2hpbmcgZnJvbSBhbGwgc291cmNlcyBmb3IgbWF4aW11bSBzcGVlZFxyXG4gICAgICBjb25zdCBwcmljZVByb21pc2VzOiBQcm9taXNlPHZvaWQ+W10gPSBbXVxyXG4gICAgICBcclxuICAgICAgLy8gMS4gQ29pbkdlY2tvIChmYXN0ZXN0LCBmcmVlKVxyXG4gICAgICBpZiAodW5jYWNoZWRDb2luZ2Vja29JZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGlkc1BhcmFtID0gdW5jYWNoZWRDb2luZ2Vja29JZHMuam9pbignLCcpXHJcbiAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmNvaW5nZWNrby5jb20vYXBpL3YzL3NpbXBsZS9wcmljZT9pZHM9JHtpZHNQYXJhbX0mdnNfY3VycmVuY2llcz11c2RgXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpY2VQcm9taXNlcy5wdXNoKFxyXG4gICAgICAgICAgZmV0Y2godXJsLCB7IHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCgxMDAwKSB9KVxyXG4gICAgICAgICAgICAudGhlbihhc3luYyAocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTWFwIENvaW5HZWNrbyBJRHMgYmFjayB0byBvcmlnaW5hbCB0b2tlbiBJRHNcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW29yaWdpbmFsSWQsIGNvaW5nZWNrb0lkXSBvZiBPYmplY3QuZW50cmllcyh0b2tlbklkVG9Db2luZ2Vja29NYXApKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2NvaW5nZWNrb0lkXSAmJiB0eXBlb2YgZGF0YVtjb2luZ2Vja29JZF0gPT09ICdvYmplY3QnICYmICd1c2QnIGluIGRhdGFbY29pbmdlY2tvSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpY2UgPSAoZGF0YVtjb2luZ2Vja29JZF0gYXMgYW55KS51c2RcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByaWNlID09PSAnbnVtYmVyJyAmJiBwcmljZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsSWRMb3dlciA9IG9yaWdpbmFsSWQudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFmZXRjaGVkUHJpY2VzW29yaWdpbmFsSWRMb3dlcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hlZFByaWNlc1tvcmlnaW5hbElkTG93ZXJdID0gcHJpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBvcmlnaW5hbElkLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSBjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlDYWNoZS5zZXQoY2FjaGVLZXksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzQXQ6IG5vdyArIENBQ0hFX1RUTF9NUyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIFJlZGlzIGNhY2hlIChhc3luYywgZG9uJ3Qgd2FpdCkgLSBvbmx5IGlmIFJlZGlzIGlzIGNvbmZpZ3VyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcy5zZXRleChgcHJpY2U6JHtjYWNoZUtleX1gLCBSRURJU19DQUNIRV9UVExfU0VDLCBKU09OLnN0cmluZ2lmeSh7IHByaWNlLCB0aW1lc3RhbXA6IG5vdyB9KSkuY2F0Y2goKCkgPT4ge30pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gTWFwIGFsbCB2YXJpYXRpb25zIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFt0b2tlbklkLCBjb2luZ2Vja29JZF0gb2YgT2JqZWN0LmVudHJpZXMoVE9LRU5fVE9fQ09JTkdFQ0tPX0lEKSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodW5jYWNoZWRDb2luZ2Vja29JZHNTZXQuaGFzKGNvaW5nZWNrb0lkKSAmJiBkYXRhW2NvaW5nZWNrb0lkXSAmJiB0eXBlb2YgZGF0YVtjb2luZ2Vja29JZF0gPT09ICdvYmplY3QnICYmICd1c2QnIGluIGRhdGFbY29pbmdlY2tvSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpY2UgPSAoZGF0YVtjb2luZ2Vja29JZF0gYXMgYW55KS51c2RcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByaWNlID09PSAnbnVtYmVyJyAmJiBwcmljZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuSWRMb3dlciA9IHRva2VuSWQudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFmZXRjaGVkUHJpY2VzW3Rva2VuSWRMb3dlcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hlZFByaWNlc1t0b2tlbklkTG93ZXJdID0gcHJpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSBjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlDYWNoZS5zZXQodG9rZW5JZExvd2VyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0OiBub3cgKyBDQUNIRV9UVExfTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBSZWRpcyBjYWNoZSAoYXN5bmMsIGRvbid0IHdhaXQpIC0gb25seSBpZiBSZWRpcyBpcyBjb25maWd1cmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVVJMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXMuc2V0ZXgoYHByaWNlOiR7dG9rZW5JZExvd2VyfWAsIFJFRElTX0NBQ0hFX1RUTF9TRUMsIEpTT04uc3RyaW5naWZ5KHsgcHJpY2UsIHRpbWVzdGFtcDogbm93IH0pKS5jYXRjaCgoKSA9PiB7fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAvLyBTaWxlbnRseSBmYWlsIC0gd2lsbCB1c2Ugb3RoZXIgc291cmNlc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gMi4gQ29pbk1hcmtldENhcCAocGFyYWxsZWwsIGlmIEFQSSBrZXkgYXZhaWxhYmxlKVxyXG4gICAgICBjb25zdCBjbWNBcGlLZXkgPSBwcm9jZXNzLmVudi5DT0lOTUFSS0VUQ0FQX0FQSV9LRVlcclxuICAgICAgaWYgKGNtY0FwaUtleSAmJiB1bmNhY2hlZElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgY21jU3ltYm9scyA9IHVuY2FjaGVkSWRzXHJcbiAgICAgICAgICAubWFwKGlkID0+IFRPS0VOX1RPX0NNQ19TWU1CT0xbaWRdIHx8IGlkLnRvVXBwZXJDYXNlKCkpXHJcbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgICAuam9pbignLCcpXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGNtY1N5bWJvbHMpIHtcclxuICAgICAgICAgIHByaWNlUHJvbWlzZXMucHVzaChcclxuICAgICAgICAgICAgZmV0Y2goYGh0dHBzOi8vcHJvLWFwaS5jb2lubWFya2V0Y2FwLmNvbS92MS9jcnlwdG9jdXJyZW5jeS9xdW90ZXMvbGF0ZXN0P3N5bWJvbD0ke2NtY1N5bWJvbHN9JmNvbnZlcnQ9VVNEYCwge1xyXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtQ01DX1BST19BUElfS0VZJzogY21jQXBpS2V5IH0sXHJcbiAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDEwMDApLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNtY0RhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgYW55XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBpZiAoY21jRGF0YS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbc3ltYm9sLCBjb2luc10gb2YgT2JqZWN0LmVudHJpZXMoY21jRGF0YS5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGNvaW5zICYmIEFycmF5LmlzQXJyYXkoY29pbnMpICYmIGNvaW5zLmxlbmd0aCA+IDAgJiYgY29pbnNbMF0ucXVvdGU/LlVTRD8ucHJpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBjb2luc1swXS5xdW90ZS5VU0QucHJpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sTG93ZXIgPSBzeW1ib2wudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbklkIG9mIHVuY2FjaGVkSWRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY21jU3ltYm9sID0gVE9LRU5fVE9fQ01DX1NZTUJPTFt0b2tlbklkXSB8fCB0b2tlbklkLnRvVXBwZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNtY1N5bWJvbCA9PT0gc3ltYm9sIHx8IHN5bWJvbExvd2VyID09PSB0b2tlbklkKSAmJiAhZmV0Y2hlZFByaWNlc1t0b2tlbklkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hlZFByaWNlc1t0b2tlbklkXSA9IHByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IGNhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlDYWNoZS5zZXQodG9rZW5JZCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0OiBub3cgKyBDQUNIRV9UVExfTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIFJlZGlzIGNhY2hlIChhc3luYywgZG9uJ3Qgd2FpdCkgLSBvbmx5IGlmIFJlZGlzIGlzIGNvbmZpZ3VyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVVJMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlzLnNldGV4KGBwcmljZToke3Rva2VuSWR9YCwgUkVESVNfQ0FDSEVfVFRMX1NFQywgSlNPTi5zdHJpbmdpZnkoeyBwcmljZSwgdGltZXN0YW1wOiBub3cgfSkpLmNhdGNoKCgpID0+IHt9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBTaWxlbnRseSBmYWlsXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIDMuIENyeXB0b0NvbXBhcmUgKHBhcmFsbGVsLCBmcmVlKVxyXG4gICAgICBpZiAodW5jYWNoZWRJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGNjU3ltYm9scyA9IHVuY2FjaGVkSWRzXHJcbiAgICAgICAgICAubWFwKGlkID0+IFRPS0VOX1RPX0NSWVBUT0NPTVBBUkVfU1lNQk9MW2lkXSB8fCBpZC50b1VwcGVyQ2FzZSgpKVxyXG4gICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgICAgLmpvaW4oJywnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjY1N5bWJvbHMpIHtcclxuICAgICAgICAgIHByaWNlUHJvbWlzZXMucHVzaChcclxuICAgICAgICAgICAgZmV0Y2goYGh0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL3ByaWNlbXVsdGk/ZnN5bXM9JHtjY1N5bWJvbHN9JnRzeW1zPVVTRGAsIHtcclxuICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMTAwMCksXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY2NEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIFJlY29yZDxzdHJpbmcsIHsgVVNEPzogbnVtYmVyIH0+XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtzeW1ib2wsIHByaWNlRGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoY2NEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmljZURhdGE/LlVTRCAmJiB0eXBlb2YgcHJpY2VEYXRhLlVTRCA9PT0gJ251bWJlcicgJiYgcHJpY2VEYXRhLlVTRCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN5bWJvbExvd2VyID0gc3ltYm9sLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbklkIG9mIHVuY2FjaGVkSWRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNjU3ltYm9sID0gVE9LRU5fVE9fQ1JZUFRPQ09NUEFSRV9TWU1CT0xbdG9rZW5JZF0gfHwgdG9rZW5JZC50b1VwcGVyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY2NTeW1ib2wgPT09IHN5bWJvbCB8fCBzeW1ib2xMb3dlciA9PT0gdG9rZW5JZCkgJiYgIWZldGNoZWRQcmljZXNbdG9rZW5JZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGVkUHJpY2VzW3Rva2VuSWRdID0gcHJpY2VEYXRhLlVTRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgY2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlDYWNoZS5zZXQodG9rZW5JZCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByaWNlRGF0YS5VU0QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzQXQ6IG5vdyArIENBQ0hFX1RUTF9NUyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBSZWRpcyBjYWNoZSAoYXN5bmMsIGRvbid0IHdhaXQpIC0gb25seSBpZiBSZWRpcyBpcyBjb25maWd1cmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlzLnNldGV4KGBwcmljZToke3Rva2VuSWR9YCwgUkVESVNfQ0FDSEVfVFRMX1NFQywgSlNPTi5zdHJpbmdpZnkoeyBwcmljZTogcHJpY2VEYXRhLlVTRCwgdGltZXN0YW1wOiBub3cgfSkpLmNhdGNoKCgpID0+IHt9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gU2lsZW50bHkgZmFpbFxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBXYWl0IGZvciBhbGwgcmVxdWVzdHMgd2l0aCBhIHJhY2UgY29uZGl0aW9uIC0gcmV0dXJuIGFzIHNvb24gYXMgd2UgaGF2ZSBhbGwgcmVxdWVzdGVkIHByaWNlc1xyXG4gICAgICAvLyBUaGlzIG9wdGltaXplcyByZXNwb25zZSB0aW1lXHJcbiAgICAgIGNvbnN0IHNldHRsZWRSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByaWNlUHJvbWlzZXMpXHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFsbCBwcmljZXMgd2UgbmVlZFxyXG4gICAgICBjb25zdCBoYXNBbGxQcmljZXMgPSB1bmNhY2hlZElkcy5ldmVyeShpZCA9PiBmZXRjaGVkUHJpY2VzW2lkLnRvTG93ZXJDYXNlKCldKVxyXG4gICAgICBcclxuICAgICAgLy8gTG9nZ2luZyBvbmx5IGluIGRldmVsb3BtZW50XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgIGlmIChoYXNBbGxQcmljZXMpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbdG9rZW4tcHJpY2VdIEFsbCBwcmljZXMgZm91bmQsIHJldHVybmluZyBlYXJseSBmb3Igc3BlZWQnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBtaXNzaW5nID0gdW5jYWNoZWRJZHMuZmlsdGVyKGlkID0+ICFmZXRjaGVkUHJpY2VzW2lkLnRvTG93ZXJDYXNlKCldKVxyXG4gICAgICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW3Rva2VuLXByaWNlXSBTdGlsbCBtaXNzaW5nIHByaWNlczonLCBtaXNzaW5nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByaWNlcyA9IHsgLi4uY2FjaGVkUHJpY2VzLCAuLi5mZXRjaGVkUHJpY2VzIH1cclxuICAgIFxyXG4gICAgLy8gTG9nZ2luZyBvbmx5IGluIGRldmVsb3BtZW50XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1t0b2tlbi1wcmljZV0gRmluYWwgcHJpY2VzIHJlc3BvbnNlOicsIHtcclxuICAgICAgICByZXF1ZXN0ZWRJZHM6IHRva2VuSWRzLFxyXG4gICAgICAgIGZvdW5kUHJpY2VzOiBPYmplY3Qua2V5cyhwcmljZXMpLFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiByZXNwb25zZSB3aXRoIGNhY2hlIGhlYWRlcnNcclxuICAgIC8vIENhY2hlIGZvciAzMCBzZWNvbmRzIC0gcHJpY2VzIHVwZGF0ZSBmcmVxdWVudGx5IGJ1dCBub3QgdG9vIGZhc3RcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHByaWNlcyB9LCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICdwdWJsaWMsIHMtbWF4YWdlPTMwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwJyxcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIEFsd2F5cyBsb2cgZXJyb3JzLCBidXQgc2FuaXRpemUgaW4gcHJvZHVjdGlvblxyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1t0b2tlbi1wcmljZV0gRXJyb3I6JywgZXJyb3IpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbdG9rZW4tcHJpY2VdIEVycm9yIGZldGNoaW5nIHByaWNlcycpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggcHJpY2VzJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicmVkaXMiLCJUT0tFTl9UT19DT0lOR0VDS09fSUQiLCJldGgiLCJibmIiLCJtYXRpYyIsInBvbCIsImF2YXgiLCJvcCIsImFyYiIsImJhc2UiLCJ6a3N5bmMiLCJsaW5lYSIsInNjcm9sbCIsImJsYXN0IiwiZ25vc2lzIiwib3BibmIiLCJtYW50bGUiLCJjcm9ub3MiLCJjcm8iLCJyb290c3RvY2siLCJyYnRjIiwic29uaWMiLCJzIiwiY29yZSIsInJvbmluIiwicm9uIiwieGRhaSIsImthdmEiLCJwbGFzbWEiLCJ4cGwiLCJwbHVtZSIsInB1bHNlY2hhaW4iLCJwbHMiLCJiZXJhY2hhaW4iLCJiZXJhIiwibW50IiwiY2VsbyIsImdvYXQiLCJidGMiLCJtZXJsaW4iLCJrYXRhbmEiLCJpbmsiLCJib2IiLCJhYnN0cmFjdCIsIm1vbiIsInVzZGMiLCJ1c2R0IiwiZGFpIiwid2V0aCIsIndidGMiLCJsaW5rIiwidW5pIiwiYWF2ZSIsImNydiIsIm1rciIsInNueCIsImNvbXAiLCJzdXNoaSIsInN1c2QiLCJmcmF4IiwiZnhzIiwibGRvIiwiZ3J0IiwiZ214IiwidmVsbyIsImFlcm8iLCJjYWtlIiwieHZzIiwiam9lIiwicWkiLCJxdWljayIsIlRPS0VOX1RPX0NNQ19TWU1CT0wiLCJUT0tFTl9UT19DUllQVE9DT01QQVJFX1NZTUJPTCIsInJ1bnRpbWUiLCJtZW1vcnlDYWNoZSIsIk1hcCIsIkNBQ0hFX1RUTF9NUyIsIlJFRElTX0NBQ0hFX1RUTF9TRUMiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInRva2VuSWRzIiwiZ2V0Iiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwibm93IiwiRGF0ZSIsImNhY2hlZFByaWNlcyIsInVuY2FjaGVkSWRzIiwiaWQiLCJjYWNoZUtleSIsInRvTG93ZXJDYXNlIiwiY2FjaGVkIiwiZXhwaXJlc0F0IiwicHJpY2UiLCJwdXNoIiwicHJvY2VzcyIsImVudiIsIlVQU1RBU0hfUkVESVNfUkVTVF9VUkwiLCJyZWRpc0tleXMiLCJtYXAiLCJyZWRpc1ZhbHVlcyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwia2V5IiwiaSIsInJlc3VsdCIsInZhbHVlIiwiU3RyaW5nIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwidGltZXN0YW1wIiwic2V0IiwiY29uc29sZSIsIndhcm4iLCJyZW1haW5pbmdVbmNhY2hlZCIsImZldGNoZWRQcmljZXMiLCJ1bmNhY2hlZENvaW5nZWNrb0lkc1NldCIsIlNldCIsInRva2VuSWRUb0NvaW5nZWNrb01hcCIsImNvaW5nZWNrb0lkIiwiYWRkIiwidW5jYWNoZWRDb2luZ2Vja29JZHMiLCJBcnJheSIsImZyb20iLCJwcmljZVByb21pc2VzIiwiaWRzUGFyYW0iLCJqb2luIiwidXJsIiwiZmV0Y2giLCJzaWduYWwiLCJBYm9ydFNpZ25hbCIsInRpbWVvdXQiLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsImRhdGEiLCJvcmlnaW5hbElkIiwiT2JqZWN0IiwiZW50cmllcyIsInVzZCIsIm9yaWdpbmFsSWRMb3dlciIsInNldGV4Iiwic3RyaW5naWZ5IiwiY2F0Y2giLCJ0b2tlbklkIiwiaGFzIiwidG9rZW5JZExvd2VyIiwiY21jQXBpS2V5IiwiQ09JTk1BUktFVENBUF9BUElfS0VZIiwiY21jU3ltYm9scyIsInRvVXBwZXJDYXNlIiwiaGVhZGVycyIsImNtY0RhdGEiLCJzeW1ib2wiLCJjb2lucyIsImlzQXJyYXkiLCJxdW90ZSIsIlVTRCIsInN5bWJvbExvd2VyIiwiY21jU3ltYm9sIiwiY2NTeW1ib2xzIiwiY2NEYXRhIiwicHJpY2VEYXRhIiwiY2NTeW1ib2wiLCJzZXR0bGVkUmVzdWx0cyIsImhhc0FsbFByaWNlcyIsImV2ZXJ5IiwibG9nIiwibWlzc2luZyIsInByaWNlcyIsInJlcXVlc3RlZElkcyIsImZvdW5kUHJpY2VzIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/token-price/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/redis.ts":
/*!**********************!*\
  !*** ./lib/redis.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRedis: () => (/* reexport safe */ _packages_lib_lib_redis__WEBPACK_IMPORTED_MODULE_0__.getRedis),\n/* harmony export */   redis: () => (/* reexport safe */ _packages_lib_lib_redis__WEBPACK_IMPORTED_MODULE_0__.redis)\n/* harmony export */ });\n/* harmony import */ var _packages_lib_lib_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../packages/lib/lib/redis */ \"(rsc)/../packages/lib/lib/redis.ts\");\n// Re-export from shared packages\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmVkaXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsaUNBQWlDO0FBQ1ciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9raWVsc3dhcC1sYW5kaW5nLy4vbGliL3JlZGlzLnRzPzUxZTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmUtZXhwb3J0IGZyb20gc2hhcmVkIHBhY2thZ2VzXHJcbmV4cG9ydCAqIGZyb20gJy4uLy4uL3BhY2thZ2VzL2xpYi9saWIvcmVkaXMnXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/redis.ts\n");

/***/ }),

/***/ "(rsc)/../packages/lib/lib/redis.ts":
/*!************************************!*\
  !*** ../packages/lib/lib/redis.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRedis: () => (/* binding */ getRedis),\n/* harmony export */   redis: () => (/* binding */ redis)\n/* harmony export */ });\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/../node_modules/@upstash/redis/nodejs.mjs\");\n\n/**\n * Gets a Redis client instance with validated environment variables.\n * Must be called after environment variables are loaded (e.g., after loadEnvConfig in scripts).\n * Note: This uses the edge-compatible Redis client.\n */ function getRedis() {\n    const url = process.env.UPSTASH_REDIS_REST_URL;\n    const token = process.env.UPSTASH_REDIS_REST_TOKEN;\n    if (!url) {\n        throw new Error(\"UPSTASH_REDIS_REST_URL is not set. Add it to .env.local and re-run.\");\n    }\n    if (!token) {\n        throw new Error(\"UPSTASH_REDIS_REST_TOKEN is not set. Add it to .env.local and re-run.\");\n    }\n    return new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n        url,\n        token\n    });\n}\n/**\n * Redis client instance for server-side use in Next.js (API routes, middleware, etc.)\n * Uses Edge-compatible Redis client for better performance in Edge runtime.\n * Environment variables are already loaded in Next.js runtime.\n * Only use this in server-side contexts (API routes, middleware, server components).\n * \n * Lazy initialization: singleton is created only when accessed, not at module load time.\n * This allows scripts to import the module without triggering env checks.\n */ let _redisInstance = null;\nconst redis = new Proxy({}, {\n    get (_target, prop) {\n        // Lazy initialization on first access\n        if (!_redisInstance) {\n            if (false) {}\n            const url = process.env.UPSTASH_REDIS_REST_URL;\n            const token = process.env.UPSTASH_REDIS_REST_TOKEN;\n            if (!url || !token) {\n                // In Next.js runtime, env should be set, but we throw a helpful error if not\n                const errorMsg =  true ? `UPSTASH_REDIS_REST_URL or UPSTASH_REDIS_REST_TOKEN is not set. Ensure these are in your .env.local file and restart the Next.js server.` : 0;\n                throw new Error(errorMsg);\n            }\n            _redisInstance = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n                url,\n                token\n            });\n        }\n        const value = _redisInstance[prop];\n        if (typeof value === \"function\") {\n            return value.bind(_redisInstance);\n        }\n        return value;\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vcGFja2FnZXMvbGliL2xpYi9yZWRpcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFFdkM7Ozs7Q0FJQyxHQUNNLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxzQkFBc0I7SUFDOUMsTUFBTUMsUUFBUUgsUUFBUUMsR0FBRyxDQUFDRyx3QkFBd0I7SUFFbEQsSUFBSSxDQUFDTCxLQUFLO1FBQ1IsTUFBTSxJQUFJTSxNQUFNO0lBQ2xCO0lBRUEsSUFBSSxDQUFDRixPQUFPO1FBQ1YsTUFBTSxJQUFJRSxNQUFNO0lBQ2xCO0lBRUEsT0FBTyxJQUFJUixpREFBS0EsQ0FBQztRQUFFRTtRQUFLSTtJQUFNO0FBQ2hDO0FBRUE7Ozs7Ozs7O0NBUUMsR0FDRCxJQUFJRyxpQkFBK0I7QUFFNUIsTUFBTUMsUUFBUSxJQUFJQyxNQUFNLENBQUMsR0FBWTtJQUMxQ0MsS0FBSUMsT0FBTyxFQUFFQyxJQUFJO1FBQ2Ysc0NBQXNDO1FBQ3RDLElBQUksQ0FBQ0wsZ0JBQWdCO1lBQ25CLElBQUksS0FBa0IsRUFBYSxFQUVsQztZQUVELE1BQU1QLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0Msc0JBQXNCO1lBQzlDLE1BQU1DLFFBQVFILFFBQVFDLEdBQUcsQ0FBQ0csd0JBQXdCO1lBRWxELElBQUksQ0FBQ0wsT0FBTyxDQUFDSSxPQUFPO2dCQUNsQiw2RUFBNkU7Z0JBQzdFLE1BQU1TLFdBQVdaLEtBQXFDLEdBQ2xELENBQUMsdUlBQXVJLENBQUMsR0FDekksQ0FBMkI7Z0JBQy9CLE1BQU0sSUFBSUssTUFBTU87WUFDbEI7WUFFQU4saUJBQWlCLElBQUlULGlEQUFLQSxDQUFDO2dCQUFFRTtnQkFBS0k7WUFBTTtRQUMxQztRQUVBLE1BQU1VLFFBQVEsY0FBdUIsQ0FBQ0YsS0FBSztRQUMzQyxJQUFJLE9BQU9FLFVBQVUsWUFBWTtZQUMvQixPQUFPQSxNQUFNQyxJQUFJLENBQUNSO1FBQ3BCO1FBQ0EsT0FBT087SUFDVDtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9raWVsc3dhcC1sYW5kaW5nLy4uL3BhY2thZ2VzL2xpYi9saWIvcmVkaXMudHM/NDYxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWRpcyB9IGZyb20gXCJAdXBzdGFzaC9yZWRpc1wiO1xuXG4vKipcbiAqIEdldHMgYSBSZWRpcyBjbGllbnQgaW5zdGFuY2Ugd2l0aCB2YWxpZGF0ZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICogTXVzdCBiZSBjYWxsZWQgYWZ0ZXIgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBsb2FkZWQgKGUuZy4sIGFmdGVyIGxvYWRFbnZDb25maWcgaW4gc2NyaXB0cykuXG4gKiBOb3RlOiBUaGlzIHVzZXMgdGhlIGVkZ2UtY29tcGF0aWJsZSBSZWRpcyBjbGllbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWRpcygpOiBSZWRpcyB7XG4gIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkw7XG4gIGNvbnN0IHRva2VuID0gcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOO1xuXG4gIGlmICghdXJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVVBTVEFTSF9SRURJU19SRVNUX1VSTCBpcyBub3Qgc2V0LiBBZGQgaXQgdG8gLmVudi5sb2NhbCBhbmQgcmUtcnVuLlwiKTtcbiAgfVxuXG4gIGlmICghdG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4gaXMgbm90IHNldC4gQWRkIGl0IHRvIC5lbnYubG9jYWwgYW5kIHJlLXJ1bi5cIik7XG4gIH1cblxuICByZXR1cm4gbmV3IFJlZGlzKHsgdXJsLCB0b2tlbiB9KTtcbn1cblxuLyoqXG4gKiBSZWRpcyBjbGllbnQgaW5zdGFuY2UgZm9yIHNlcnZlci1zaWRlIHVzZSBpbiBOZXh0LmpzIChBUEkgcm91dGVzLCBtaWRkbGV3YXJlLCBldGMuKVxuICogVXNlcyBFZGdlLWNvbXBhdGlibGUgUmVkaXMgY2xpZW50IGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UgaW4gRWRnZSBydW50aW1lLlxuICogRW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBhbHJlYWR5IGxvYWRlZCBpbiBOZXh0LmpzIHJ1bnRpbWUuXG4gKiBPbmx5IHVzZSB0aGlzIGluIHNlcnZlci1zaWRlIGNvbnRleHRzIChBUEkgcm91dGVzLCBtaWRkbGV3YXJlLCBzZXJ2ZXIgY29tcG9uZW50cykuXG4gKiBcbiAqIExhenkgaW5pdGlhbGl6YXRpb246IHNpbmdsZXRvbiBpcyBjcmVhdGVkIG9ubHkgd2hlbiBhY2Nlc3NlZCwgbm90IGF0IG1vZHVsZSBsb2FkIHRpbWUuXG4gKiBUaGlzIGFsbG93cyBzY3JpcHRzIHRvIGltcG9ydCB0aGUgbW9kdWxlIHdpdGhvdXQgdHJpZ2dlcmluZyBlbnYgY2hlY2tzLlxuICovXG5sZXQgX3JlZGlzSW5zdGFuY2U6IFJlZGlzIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBjb25zdCByZWRpcyA9IG5ldyBQcm94eSh7fSBhcyBSZWRpcywge1xuICBnZXQoX3RhcmdldCwgcHJvcCkge1xuICAgIC8vIExhenkgaW5pdGlhbGl6YXRpb24gb24gZmlyc3QgYWNjZXNzXG4gICAgaWYgKCFfcmVkaXNJbnN0YW5jZSkge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlZGlzIGluc3RhbmNlIGNhbiBvbmx5IGJlIHVzZWQgc2VydmVyLXNpZGUuIFVzZSBnZXRSZWRpcygpIGluIHNjcmlwdHMgdGhhdCBuZWVkIGVudiBsb2FkaW5nLlwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTDtcbiAgICAgIGNvbnN0IHRva2VuID0gcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOO1xuXG4gICAgICBpZiAoIXVybCB8fCAhdG9rZW4pIHtcbiAgICAgICAgLy8gSW4gTmV4dC5qcyBydW50aW1lLCBlbnYgc2hvdWxkIGJlIHNldCwgYnV0IHdlIHRocm93IGEgaGVscGZ1bCBlcnJvciBpZiBub3RcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCJcbiAgICAgICAgICA/IGBVUFNUQVNIX1JFRElTX1JFU1RfVVJMIG9yIFVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTiBpcyBub3Qgc2V0LiBFbnN1cmUgdGhlc2UgYXJlIGluIHlvdXIgLmVudi5sb2NhbCBmaWxlIGFuZCByZXN0YXJ0IHRoZSBOZXh0LmpzIHNlcnZlci5gXG4gICAgICAgICAgOiBcIlJlZGlzIGNvbmZpZ3VyYXRpb24gZXJyb3JcIjtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICAgIH1cblxuICAgICAgX3JlZGlzSW5zdGFuY2UgPSBuZXcgUmVkaXMoeyB1cmwsIHRva2VuIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB2YWx1ZSA9IChfcmVkaXNJbnN0YW5jZSBhcyBhbnkpW3Byb3BdO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5iaW5kKF9yZWRpc0luc3RhbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59KTtcblxuIl0sIm5hbWVzIjpbIlJlZGlzIiwiZ2V0UmVkaXMiLCJ1cmwiLCJwcm9jZXNzIiwiZW52IiwiVVBTVEFTSF9SRURJU19SRVNUX1VSTCIsInRva2VuIiwiVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOIiwiRXJyb3IiLCJfcmVkaXNJbnN0YW5jZSIsInJlZGlzIiwiUHJveHkiLCJnZXQiLCJfdGFyZ2V0IiwicHJvcCIsImVycm9yTXNnIiwidmFsdWUiLCJiaW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../packages/lib/lib/redis.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/@upstash","vendor-chunks/uncrypto"], () => (__webpack_exec__("(rsc)/../node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftoken-price%2Froute&page=%2Fapi%2Ftoken-price%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftoken-price%2Froute.ts&appDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmeltl%5COneDrive%5CDesktop%5Ckielswap%5Clanding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();